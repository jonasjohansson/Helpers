function init(){client.authenticate({interactive:!0},function(t,e){t&&alert("Error: "+t)}),btn=Dropbox.createChooseButton({success:function(t){file=t[0].name}}),document.body.appendChild(btn)}function write(t,e,n){client.readFile(file,function(a,i){date=the_date(),url=document.URL,text='<div class="'+e+'" data-url="'+n.url+'" data-year="'+date.year+'" data-month="'+date.month+'" data-day="'+date.day+'">'+t+"</div>\n"+i,client.writeFile(file,text,function(t){})})}function the_date(){return now=new Date,yyyy=now.getFullYear(),mm=now.getMonth(),dd=now.getDate(),10>mm&&(mm="0"+mm),10>dd&&(dd="0"+dd),{year:yyyy,month:mm,day:dd}}var client=new Dropbox.Client({key:"91n7kq2goawbg88"}),file="log.html",btn;document.addEventListener("DOMContentLoaded",init),chrome.contextMenus&&(chrome.contextMenus.create({title:"Add image",contexts:["image"],type:"normal",onclick:function(t,e){write('<a href="'+t.srcUrl+'" target="_blank">'+t.srcUrl+'<img src="'+t.srcUrl+'"></a>',"image",e)}}),chrome.contextMenus.create({title:"Add text",contexts:["selection"],type:"normal",onclick:function(t,e){write("<span>"+t.selectionText+"</span>","text",e)}}),chrome.contextMenus.create({title:"Add link",contexts:["link"],type:"normal",onclick:function(t,e){write('<a href="">'+t.linkUrl+"</a>","link",e)}}));